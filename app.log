2025-09-04 15:21:20,206 - numexpr.utils - INFO - Note: NumExpr detected 16 cores but "NUMEXPR_MAX_THREADS" not set, so enforcing safe limit of 8.
2025-09-04 15:21:20,207 - numexpr.utils - INFO - NumExpr defaulting to 8 threads.
2025-09-04 15:21:23,422 - app.core.logging - INFO - Initializing OpenAI client with key: sk-proj-z6...
2025-09-04 15:21:23,470 - app.core.logging - INFO - Starting Flight Booking Assistant v1.0.0
2025-09-04 15:21:29,599 - app.core.logging - INFO - Received chat request: Show me flights from Delhi to Mumbai on 15th Octob...
2025-09-04 15:21:29,600 - app.core.logging - INFO - No existing flight data in session, fetching new data
2025-09-04 15:21:29,601 - app.core.logging - INFO - Processing flight search query: Show me flights from Delhi to Mumbai on 15th October
2025-09-04 15:21:29,601 - app.core.logging - INFO - Calling OpenAI with model: gpt-4o-mini
2025-09-04 15:21:29,601 - app.core.logging - INFO - System message: You are an assistant that helps extract flight information from user queries. Today is 2025-09-04. Extract the following details from the query: 1. location_origin: The departure city or airport, ensu...
2025-09-04 15:21:29,601 - app.core.logging - INFO - User message: Show me flights from Delhi to Mumbai on 15th October
2025-09-04 15:21:30,896 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-04 15:21:30,909 - app.core.logging - INFO - OpenAI response: {"location_origin": "DEL", "location_destination": "BOM", "departure_date": "2025-10-15", "adults": 1}
2025-09-04 15:21:30,909 - app.core.logging - INFO - Extracted flight info: {'location_origin': 'DEL', 'location_destination': 'BOM', 'departure_date': '2025-10-15', 'adults': 1}
2025-09-04 15:21:34,167 - app.core.logging - ERROR - Flight search error: [---]
2025-09-04 15:21:34,168 - app.core.logging - ERROR - No flights found or error in forming dataframe
2025-09-04 15:22:00,416 - app.core.logging - INFO - Received chat request: I want to fly from San Francisco to New York on Oc...
2025-09-04 15:22:00,417 - app.core.logging - INFO - No existing flight data in session, fetching new data
2025-09-04 15:22:00,417 - app.core.logging - INFO - Processing flight search query: I want to fly from San Francisco to New York on October 20
2025-09-04 15:22:00,417 - app.core.logging - INFO - Calling OpenAI with model: gpt-4o-mini
2025-09-04 15:22:00,417 - app.core.logging - INFO - System message: You are an assistant that helps extract flight information from user queries. Today is 2025-09-04. Extract the following details from the query: 1. location_origin: The departure city or airport, ensu...
2025-09-04 15:22:00,417 - app.core.logging - INFO - User message: I want to fly from San Francisco to New York on October 20
2025-09-04 15:22:01,921 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-04 15:22:01,939 - app.core.logging - INFO - OpenAI response: {"location_origin": "SFO", "location_destination": "JFK", "departure_date": "2025-10-20", "adults": 1}
2025-09-04 15:22:01,939 - app.core.logging - INFO - Extracted flight info: {'location_origin': 'SFO', 'location_destination': 'JFK', 'departure_date': '2025-10-20', 'adults': 1}
2025-09-04 15:22:20,479 - app.core.logging - INFO - Created dataframe with 16 flights
2025-09-04 15:22:20,479 - app.core.logging - INFO - Sending query to LLM: System Prompt: 
        You are a professional flight booking assistant specializing in helping users find and analyze flight information. You have access to real-time flight data and can provide detailed analysis and recommendations.

        CURRENT CONTEXT:
        - Flight data from SFO to JFK
        - Real-time pricing and availability information
        - All prices are shown in Indian Rupees (INR)

        CAPABILITIES:
        - Analyze flight data including prices, airlines, stops, cabin classes
        - Provide comparative analysis and recommendations
        - Identify best deals and optimal flight options
        - Handle follow-up questions about the same flight search

        RESPONSE GUIDELINES:
        - DO NOT create a numbered list of flights with departure/arrival times and prices
        - Analyze the ACTUAL flight data available and provide specific insights
        - Mention specific prices in INR (₹), airlines, and key differences you find in the data
        - Highlight the cheapest options, direct flights, and best value choices
        - Provide actionable recommendations based on the real flight options
        - Keep it concise but informative
        - Flight cards will show the detailed flight information, but your text should reference the actual data

        ANALYSIS FOCUS:
        - Identify the cheapest flights available and their prices
        - Point out direct flights vs flights with stops
        - Highlight time differences and convenience factors
        - Mention specific airlines operating this route
        - Compare value propositions of different options

        IMPORTANT: Base your response on the ACTUAL flight data in the dataframe. Don't give generic advice - analyze the real flights available for this specific route and date.

        Provide specific insights about the available flight options to help users choose the best flight for their needs.
        
Query: I want to fly from San Francisco to New York on October 20
2025-09-04 15:22:21,645 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-04 15:22:24,274 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-04 15:22:26,600 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-04 15:22:27,549 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-04 15:22:33,854 - app.core.logging - INFO - LLM Response: On October 20, 2025, there are several flight options available from San Francisco (SFO) to New York (JFK), primarily operated by Alaska Airlines and JetBlue Airways. Here's a concise analysis of your options:

1. **Airlines**:
   - **Alaska Airlines (AS)**: Several flight options available, most of which are non-stop.
   - **JetBlue Airways (B6)**: Multiple options with varying departure times, typically with one or no stops.

2. **Pricing**:
   - Prices range from **₹9,263.58** on Alaska Airlines for direct flights to around **₹12,351.40** for JetBlue Airways flights, which may include stops.

3. **Stops**: 
   - **Alaska Airlines** offers direct flights which could provide a more convenient travel experience without layovers.
   - **JetBlue Airways** has options with varying stops, potentially increasing total travel time.

4. **Cabin Class**: 
   - All flights listed are in **Economy Class**, which is great for budget travelers.

5. **Time Factors**:
   - Direct flights save time and hassle, making Alaska Airlines a favorable option if you prefer a quick journey.

### Recommendations:
- If you prioritize cost and time, consider the direct flights with **Alaska Airlines** at approximately **₹9,263.58**, which appears to be the cheapest and most convenient option available on this date.
- For travelers open to layovers, **JetBlue Airways** offers more variety in flight times, but you would need to weigh the additional time against the price.

In summary, Alaska Airlines presents the best value for direct travel, while JetBlue may offer flexibility depending on your schedule.
2025-09-04 15:22:33,857 - app.core.logging - INFO - Flight data prepared: True
2025-09-04 15:22:33,858 - app.core.logging - INFO - Flight data length: 16
2025-09-04 15:22:33,858 - app.core.logging - INFO - First flight record: {'Airline Code': 'AS', 'Airline Name': 'ALASKA AIRLINES', 'Departure': Timestamp('2025-10-20 23:00:00'), 'Arrival': Timestamp('2025-10-21 07:34:00'), 'Total Price': '9263.58', 'Currency': 'INR', 'Number of Stops': 0, 'Cabin': 'ECONOMY', 'One Way': True}
2025-09-04 15:22:33,858 - app.core.logging - INFO - Returning result with show_flight_cards: True
2025-09-04 15:23:10,335 - app.core.logging - INFO - Initializing OpenAI client with key: sk-proj-z6...
2025-09-04 15:23:10,372 - app.core.logging - INFO - Starting Flight Booking Assistant v1.0.0
2025-09-04 15:23:10,413 - app.core.logging - INFO - Initializing OpenAI client with key: sk-proj-z6...
2025-09-04 15:23:10,451 - app.core.logging - INFO - Starting Flight Booking Assistant v1.0.0
2025-09-04 15:23:10,463 - app.core.logging - INFO - Initializing OpenAI client with key: sk-proj-z6...
2025-09-04 15:23:10,501 - app.core.logging - INFO - Starting Flight Booking Assistant v1.0.0
2025-09-04 15:23:10,542 - app.core.logging - INFO - Initializing OpenAI client with key: sk-proj-z6...
2025-09-04 15:23:10,583 - app.core.logging - INFO - Starting Flight Booking Assistant v1.0.0
2025-09-04 15:23:20,685 - app.core.logging - INFO - Received chat request: i want flight for delhi to mumbai on 10 oct...
2025-09-04 15:23:20,685 - app.core.logging - INFO - No existing flight data in session, fetching new data
2025-09-04 15:23:20,685 - app.core.logging - INFO - Processing flight search query: i want flight for delhi to mumbai on 10 oct
2025-09-04 15:23:20,685 - app.core.logging - INFO - Calling OpenAI with model: gpt-4o-mini
2025-09-04 15:23:20,685 - app.core.logging - INFO - System message: You are an assistant that helps extract flight information from user queries. Today is 2025-09-04. Extract the following details from the query: 1. location_origin: The departure city or airport, ensu...
2025-09-04 15:23:20,685 - app.core.logging - INFO - User message: i want flight for delhi to mumbai on 10 oct
2025-09-04 15:23:22,328 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-04 15:23:22,349 - app.core.logging - INFO - OpenAI response: {"location_origin": "DEL", "location_destination": "BOM", "departure_date": "2025-10-10", "adults": 1}
2025-09-04 15:23:22,350 - app.core.logging - INFO - Extracted flight info: {'location_origin': 'DEL', 'location_destination': 'BOM', 'departure_date': '2025-10-10', 'adults': 1}
2025-09-04 15:23:54,717 - app.core.logging - INFO - Created dataframe with 11 flights
2025-09-04 15:23:54,718 - app.core.logging - INFO - Sending query to LLM: System Prompt: 
        You are a professional flight booking assistant specializing in helping users find and analyze flight information. You have access to real-time flight data and can provide detailed analysis and recommendations.

        CURRENT CONTEXT:
        - Flight data from DEL to BOM
        - Real-time pricing and availability information
        - All prices are shown in Indian Rupees (INR)

        CAPABILITIES:
        - Analyze flight data including prices, airlines, stops, cabin classes
        - Provide comparative analysis and recommendations
        - Identify best deals and optimal flight options
        - Handle follow-up questions about the same flight search

        RESPONSE GUIDELINES:
        - DO NOT create a numbered list of flights with departure/arrival times and prices
        - Analyze the ACTUAL flight data available and provide specific insights
        - Mention specific prices in INR (₹), airlines, and key differences you find in the data
        - Highlight the cheapest options, direct flights, and best value choices
        - Provide actionable recommendations based on the real flight options
        - Keep it concise but informative
        - Flight cards will show the detailed flight information, but your text should reference the actual data

        ANALYSIS FOCUS:
        - Identify the cheapest flights available and their prices
        - Point out direct flights vs flights with stops
        - Highlight time differences and convenience factors
        - Mention specific airlines operating this route
        - Compare value propositions of different options

        IMPORTANT: Base your response on the ACTUAL flight data in the dataframe. Don't give generic advice - analyze the real flights available for this specific route and date.

        Provide specific insights about the available flight options to help users choose the best flight for their needs.
        
Query: i want flight for delhi to mumbai on 10 oct
2025-09-04 15:23:55,618 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-04 15:23:57,141 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-04 15:24:03,295 - app.core.logging - INFO - LLM Response: For flights from Delhi (DEL) to Mumbai (BOM) on October 10, 2025, there are several options available, primarily operated by Air India. Here's a concise analysis based on actual flight data:

1. **Cheapest Option**: The most affordable flight costs ₹5,239.05 and is a **direct flight** departing at 21:10 and arriving at 23:35. This flight has **0 stops**, making it a convenient choice for travelers looking for efficiency.

2. **Direct Flights**: Several direct flights are offered on this date, providing flexibility in departure times. The earliest direct flight departs at **07:00** and arrives at **09:15**, priced at ₹6,854.47. Other direct options are available throughout the day with similar pricing and convenient arrival times.

3. **Flight with Stops**: There are a couple of flights that include **1 stop**, departing at 11:00 and 18:00. Both cost ₹5,587.47, but they involve longer travel times due to the stopover.

4. **Value Proposition**: If convenience is a priority, opting for the direct flights at ₹6,854.47 offers a good balance between time and cost. However, if the cheapest fare is what you're after, the direct flight at ₹5,239.05 represents excellent value.

Overall, if you're looking for a straightforward and cost-effective option, the flight departing at 21:10 is the best pick. If you prefer to travel earlier, the 07:00 direct flight is also a commendable choice, albeit at a higher fare.
2025-09-04 15:24:03,298 - app.core.logging - INFO - Flight data prepared: True
2025-09-04 15:24:03,298 - app.core.logging - INFO - Flight data length: 11
2025-09-04 15:24:03,298 - app.core.logging - INFO - First flight record: {'Airline Code': 'AI', 'Airline Name': 'AIR INDIA', 'Departure': '2025-10-10T21:10:00', 'Arrival': '2025-10-10T23:35:00', 'Total Price': '5239.05', 'Currency': 'INR', 'Number of Stops': 0, 'Cabin': 'ECONOMY', 'One Way': True}
2025-09-04 15:24:03,298 - app.core.logging - INFO - Returning result with show_flight_cards: True
